<div class="consulta-container">
  <h2>{{ consulta.id ? 'Editar Consulta' : 'Agendar Consulta' }}</h2>

  <form (ngSubmit)="consulta.id ? editarConsulta() : agendarConsulta()" #consultaForm="ngForm">
    <label for="paciente">Paciente:</label>
    <select id="paciente" name="paciente" [(ngModel)]="consulta.pacienteId" required>
      <option value="" disabled selected>Selecione um paciente</option>
      <option *ngFor="let paciente of pacientes" [value]="paciente.id">
        {{ paciente.nome }}
      </option>
    </select>

    <label for="profissional">Profissional:</label>
    <select id="profissional" name="profissional" [(ngModel)]="consulta.profissionalId" required>
      <option value="" disabled selected>Selecione um profissional</option>
      <option *ngFor="let profissional of profissionais" [value]="profissional.id">
        {{ profissional.nome }}
      </option>
    </select>

    <label for="data">Data:</label>
    <input type="date" id="data" name="data" [(ngModel)]="consulta.data" required />

    <label for="hora">Hora:</label>
    <input type="time" id="hora" name="hora" [(ngModel)]="consulta.hora" required />

    <label for="observacao">Observações:</label>
    <textarea id="observacao" name="observacao" [(ngModel)]="consulta.observacao" rows="3"
      placeholder="Ex: paciente com dor de cabeça..."></textarea>

    <button type="submit" [disabled]="!consultaForm.form.valid">
      {{ consulta.id ? 'Salvar Alterações' : 'Agendar' }}
    </button>

    <button type="button" (click)="voltarHome()" class="cancelar">
      Cancelar / Voltar
    </button>

  </form>

  <div *ngIf="mensagem" class="mensagem">
    {{ mensagem }}
  </div>
</div>